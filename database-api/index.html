<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Database API - learningOrchestra Docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Database API";
    var mkdocs_page_input_path = "database-api.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> learningOrchestra Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API Guide</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Microservices REST APIs</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Database API</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#gui-tool-to-handle-database-files">GUI tool to handle database files</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#list-all-inserted-files">List all inserted files</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#downloaded-files-metadata">Downloaded files Metadata</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#preprocessed-files-metadata">Preprocessed files metadata</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#classifier-prediction-files-metadata">Classifier prediction files metadata</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#list-file-content">List file content</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#post-file">Post file</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#delete-an-existing-file">Delete an existing file</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../projection-api/">Projection API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../datatype-api/">Data Type API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../histogram-api/">Histogram API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../t-sne-api/">t-SNE API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../pca-api/">PCA API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../modelbuilder-api/">Model builder API</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../python-apis/">python-client APIs</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">learningOrchestra Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Microservices REST APIs &raquo;</li>
        
      
        
          <li>API Guide &raquo;</li>
        
      
    
    <li>Database API</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="database-api">Database API</h1>
<p>The <strong>Database API</strong> microservice creates a level of abstraction through a REST API. </p>
<p>Using MongoDB, datasets are downloaded in CSV format and parsed into JSON format where the primary key for each document is the filename field contained in the JSON file POST request.</p>
<h2 id="gui-tool-to-handle-database-files">GUI tool to handle database files</h2>
<p>There are GUI tools to handle database files, like <a href="https://nosqlbooster.com">NoSQLBooster</a> can interact with mongoDB used in database, and makes several tasks which are limited in <code>learning-orchestra-client</code> package, as schema visualization and files extraction and download to formats as CSV and JSON. </p>
<p>You also can navigate in all inserted files in easy way and visualize each row from determined file, to use this tool connect with the url <code>cluster\_ip:27017</code> and use the credentials:</p>
<pre><code>username = root
password = owl45#21
</code></pre>

<h2 id="list-all-inserted-files">List all inserted files</h2>
<p><code>GET CLUSTER_IP:5000/files</code></p>
<p>Returns an array of metadata files from the database, where each file contains a metadata file.</p>
<h3 id="downloaded-files-metadata">Downloaded files Metadata</h3>
<pre><code class="json">{
    &quot;fields&quot;: [
        &quot;PassengerId&quot;,
        &quot;Survived&quot;,
        &quot;Pclass&quot;,
        &quot;Name&quot;,
        &quot;Sex&quot;,
        &quot;Age&quot;,
        &quot;SibSp&quot;,
        &quot;Parch&quot;,
        &quot;Ticket&quot;,
        &quot;Fare&quot;,
        &quot;Cabin&quot;,
        &quot;Embarked&quot;
    ],
    &quot;filename&quot;: &quot;titanic_training&quot;,
    &quot;finished&quot;: true,
    &quot;time_created&quot;: &quot;2020-07-28T22:16:10-00:00&quot;,
    &quot;url&quot;: &quot;https://filebin.net/rpfdy8clm5984a4c/titanic_training.csv?t=gcnjz1yo&quot;
}
</code></pre>

<ul>
<li><code>fields</code> - Names of the columns in the file</li>
<li><code>filename</code> - Name of the file</li>
<li><code>finished</code> - Flag used to indicate if asynchronous processing from file downloader is finished</li>
<li><code>time_created</code> - Time of creation</li>
<li><code>url</code> - URL used to download the file</li>
</ul>
<h3 id="preprocessed-files-metadata">Preprocessed files metadata</h3>
<pre><code class="json">{
    &quot;fields&quot;: [
        &quot;PassengerId&quot;,
        &quot;Survived&quot;,
        &quot;Pclass&quot;,
        &quot;Name&quot;,
        &quot;Sex&quot;,
        &quot;Age&quot;,
        &quot;SibSp&quot;,
        &quot;Parch&quot;,
        &quot;Embarked&quot;
    ],
    &quot;filename&quot;: &quot;titanic_training_projection&quot;,
    &quot;finished&quot;: false,
    &quot;parent_filename&quot;: &quot;titanic_training&quot;,
    &quot;time_created&quot;: &quot;2020-07-28T12:01:44-00:00&quot;
}
</code></pre>

<ul>
<li><code>parent_filename</code> - The <code>filename</code> used to make a preprocess task, from which the current file is derived.</li>
</ul>
<h3 id="classifier-prediction-files-metadata">Classifier prediction files metadata</h3>
<pre><code class="json">{
    &quot;F1&quot;: &quot;0.7030995388400528&quot;,
    &quot;accuracy&quot;: &quot;0.7034883720930233&quot;,
    &quot;classificator&quot;: &quot;nb&quot;,
    &quot;filename&quot;: &quot;titanic_testing_new_prediction_nb&quot;,
    &quot;fit_time&quot;: 41.870062828063965
}
</code></pre>

<ul>
<li><code>F1</code> - F1 Score from model accuracy</li>
<li><code>accuracy</code> - Accuracy from model prediction</li>
<li><code>classificator</code> - Initials from used classificator</li>
<li><code>filename</code> - Name of the file </li>
<li><code>fit_time</code> - Time taken for the model to be fit during training</li>
</ul>
<h2 id="list-file-content">List file content</h2>
<p><code>GET CLUSTER_IP:5000/files/&lt;filename&gt;?skip=number&amp;limit=number&amp;query={}</code></p>
<p>Returns rows of the file requested, with pagination.</p>
<ul>
<li><code>filename</code> - Name of file requests</li>
<li><code>skip</code> - Amount of lines to skip in the CSV file</li>
<li><code>limit</code> - Limit the query result, maximum limit set to 20 rows</li>
<li><code>query</code> - Query to find documents, if only pagination is requested, <code>query</code> should be empty curly brackets <code>query={}</code></li>
</ul>
<p>The first row in the query is always the metadata file.</p>
<h2 id="post-file">Post file</h2>
<p><code>POST CLUSTER_IP:5000/files</code></p>
<p>Insert a CSV into the database using the POST method, JSON must be contained in the body of the HTTP request.
The following fields are required: </p>
<pre><code class="json">{
    &quot;filename&quot;: &quot;key_to_document_identification&quot;,
    &quot;url&quot;: &quot;http://sitetojson.file/path/to/csv&quot;
}
</code></pre>

<h2 id="delete-an-existing-file">Delete an existing file</h2>
<p><code>DELETE CLUSTER_IP:5000/files/&lt;filename&gt;</code></p>
<p>Request of type <code>DELETE</code>, passing the <code>filename</code> field of an existing file in the request parameters, deleting the file in the database.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../projection-api/" class="btn btn-neutral float-right" title="Projection API">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../usage/" class="btn btn-neutral" title="Usage"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../usage/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../projection-api/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
